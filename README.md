# لوحة تحكم الروضة المطورة 🌟

## نظام إدارة وتحليل بيانات الأطفال مع الاعتماد الحصري على Google Sheets

> ⚠️ **مهم**: النظام يعتمد حصرياً على Google Sheets لتحميل البيانات. لا توجد بيانات محلية احتياطية.

### 🚀 المميزات الجديدة

#### الاعتماد الحصري على Google Sheets
- **لا توجد بيانات محلية**: النظام يعتمد بالكامل على Google Sheets
- **رسائل خطأ واضحة**: توجيه المستخدم لحل المشاكل وإعادة التحميل
- **اختبار الاتصال**: إمكانية اختبار الاتصال بـ Google Sheets من لوحة التحكم
- **إرشادات شاملة**: دليل مفصل لإعداد Google Sheets بشكل صحيح

#### لوحة تحكم المدير الشاملة
- **إدارة كاملة للإعدادات**: جميع إعدادات `config.js` متاحة الآن عبر واجهة المدير
- **تبويبات منظمة**: 8 تبويبات مختلفة لإدارة جميع جوانب التطبيق
- **حفظ تلقائي**: الإعدادات تُحفظ في التخزين المحلي تلقائياً
- **استيراد وتصدير**: إمكانية تصدير واستيراد ملفات الإعدادات

#### الإعدادات المتاحة في لوحة التحكم

##### 1. التبويب العام
- عنوان التطبيق والعنوان الفرعي
- كلمة مرور المدير
- اللغة (عربي/إنجليزي)
- النطاق العمري (الحد الأدنى والأقصى)
- تفعيل/إلغاء تحذيرات العمر

##### 2. تبويب المظهر
- اختيار المظهر (فاتح/داكن)
- تخصيص ألوان الرسوم البيانية:
  - اللون الأساسي
  - اللون الثانوي
  - لون التحذير
  - لون الخطر
  - لون المعلومات

##### 3. تبويب البيانات
- **رابط Google Sheets (مطلوب)**: الرابط الوحيد لمصدر البيانات
- **اختبار الاتصال**: زر لاختبار صحة الرابط والاتصال
- تكوين إعدادات الشبكة:
  - مهلة الاتصال (5-60 ثانية)
  - عدد محاولات الإعادة (1-10 محاولات)
- **إرشادات مفصلة**: دليل خطوة بخطوة لإعداد Google Sheets

##### 4. تبويب الرسوم البيانية
- تفعيل/إلغاء الحركة في الرسوم البيانية
- التصميم المتجاوب
- عرض التسميات
- عرض وصف الرسم البياني

##### 5. تبويب التصفية
- تفعيل/إلغاء تصفية الجنس
- تفعيل/إلغاء تصفية العمر
- تفعيل/إلغاء تصفية الروضة السابقة
- تفعيل/إلغاء تصفية الهاتف
- الترتيب الافتراضي ونوعه

##### 6. تبويب التنبيهات
- تفعيل/إلغاء تنبيهات العمر
- تفعيل/إلغاء تنبيهات البيانات المفقودة
- تفعيل/إلغاء رسائل النجاح
- مدة إخفاء التنبيه تلقائياً

##### 7. تبويب التصدير
- تفعيل/إلغاء تصدير PDF
- تفعيل/إلغاء تصدير Excel
- تفعيل/إلغاء تصدير CSV
- تضمين الرسوم البيانية في التصدير
- إعدادات الجدول (عدد العناصر، الترقيم، البحث)

##### 8. تبويب الإعدادات المتقدمة
- وضع التطوير
- تفعيل سجلات وحدة التحكم
- مراقبة الأداء
- النسخ الاحتياطي التلقائي
- إعدادات النسخ الاحتياطي
- **المنطقة الخطرة**: إعادة تعيين جميع البيانات

### 📁 هيكل المشروع المحدث

```
kindergarten-dashboard/
├── index.html              # الصفحة الرئيسية المحدثة
├── css/
│   ├── styles.css         # التنسيقات الأساسية
│   └── admin-styles.css   # تنسيقات لوحة التحكم الجديدة
└── js/
    ├── config.js          # ملف الإعدادات الشامل
    ├── data.js           # البيانات المحلية
    ├── sheets.js         # اتصال Google Sheets
    ├── charts.js         # الرسوم البيانية
    ├── filters.js        # نظام التصفية
    ├── admin.js          # لوحة تحكم المدير الجديدة
    └── main.js           # الملف الرئيسي
```

### 📊 إعداد Google Sheets (مطلوب)

#### متطلبات الجدول
يجب أن يحتوي جدول Google Sheets على الأعمدة التالية **بالترتيب المحدد**:

1. **الاسم** - اسم الطفل الكامل
2. **العمر** - عمر الطفل بالسنوات (رقم صحيح)
3. **الجنس** - ذكر أو أنثى
4. **روضة سابقة** - نعم أو لا
5. **اسم الأب** - اسم والد الطفل
6. **رقم الهاتف** - رقم الاتصال

#### خطوات الإعداد التفصيلية

1. **إنشاء الجدول**:
   - اذهب إلى [Google Sheets](https://sheets.google.com)
   - أنشئ جدولاً جديداً
   - أضف الأعمدة الستة المطلوبة في الصف الأول

2. **إدخال البيانات**:
   - أدخل بيانات الأطفال في الصفوف التالية
   - تأكد من أن العمر مكتوب كرقم صحيح
   - استخدم "ذكر" أو "أنثى" للجنس
   - استخدم "نعم" أو "لا" للروضة السابقة

3. **مشاركة الجدول**:
   - اضغط زر "مشاركة" في أعلى يمين الجدول
   - في نافذة المشاركة، اضغط "تغيير"
   - اختر "يمكن لأي شخص لديه الرابط المشاهدة"
   - اضغط "تم" ثم "نسخ الرابط"

4. **تكوين النظام**:
   - افتح لوحة تحكم المدير في التطبيق
   - اذهب إلى تبويب "البيانات"
   - الصق رابط الجدول في حقل "رابط Google Sheets"
   - اضغط "اختبار الاتصال" للتأكد من صحة الإعداد
   - احفظ الإعدادات

#### استكشاف أخطاء Google Sheets

**إذا فشل تحميل البيانات:**
- تحقق من اتصالك بالإنترنت
- تأكد من أن الجدول مشارك للعامة
- تحقق من صحة ترتيب الأعمدة
- استخدم زر "اختبار الاتصال" في لوحة التحكم

**رسائل الخطأ الشائعة:**
- `HTTP 403`: الجدول غير مشارك أو محمي
- `HTTP 404`: رابط الجدول غير صحيح
- `البيانات فارغة`: الجدول لا يحتوي على سجلات صحيحة
- `أعمدة مفقودة`: ترتيب أو أسماء الأعمدة غير صحيحة

### 🔧 كيفية الاستخدام

#### الوصول للوحة تحكم المدير

1. **افتح التطبيق** في المتصفح
2. **ابحث عن أيقونة الترس** في أعلى يمين الصفحة
3. **اضغط على الأيقونة** لفتح نافذة تسجيل الدخول
4. **أدخل كلمة المرور** (افتراضياً: `admin123`)
5. **اضغط دخول** للوصول للوحة التحكم

#### تخصيص الإعدادات

1. **استخدم التبويبات** للانتقال بين أقسام الإعدادات
2. **عدّل القيم** حسب احتياجاتك
3. **اضغط "حفظ الإعدادات"** لتطبيق التغييرات
4. **سيتم إعادة تحميل التطبيق** لتطبيق الإعدادات الجديدة

#### تصدير واستيراد الإعدادات

- **تصدير الإعدادات**: اضغط "تصدير الإعدادات" لحفظ ملف JSON
- **استيراد الإعدادات**: اضغط "استيراد الإعدادات" واختر ملف JSON

### 🎨 المظاهر المتاحة

#### المظهر الفاتح (افتراضي)
- خلفية فاتحة بتدرجات زرقاء
- نصوص داكنة للوضوح
- ألوان زاهية للرسوم البيانية

#### المظهر الداكن
- خلفية داكنة بتدرجات رمادية
- نصوص فاتحة
- ألوان متباينة للرسوم البيانية

### 📱 التصميم المتجاوب

- **الأجهزة المكتبية**: عرض كامل للتبويبات والمحتوى
- **الأجهزة اللوحية**: تخطيط معدل للشاشات المتوسطة
- **الهواتف المحمولة**: تبويبات قابلة للتمرير وأزرار بعرض كامل

### 🔒 الأمان

- **كلمة مرور محمية**: لوحة التحكم محمية بكلمة مرور قابلة للتخصيص
- **تشفير التخزين**: الإعدادات محفوظة بأمان في التخزين المحلي
- **إعادة تعيين آمنة**: خيار إعادة تعيين البيانات في المنطقة الخطرة

### 🛠️ التخصيص المتقدم

#### إضافة إعدادات جديدة

1. **أضف الإعداد** في `config.js`:
```javascript
CUSTOM_SETTING: "القيمة الافتراضية"
```

2. **أضف حقل الإدخال** في لوحة التحكم:
```javascript
<input type="text" id="custom-setting" value="${this.currentConfig.CUSTOM_SETTING}">
```

3. **أضف المعالجة** في دالة `collectFormData()`:
```javascript
this.currentConfig.CUSTOM_SETTING = document.getElementById('custom-setting').value;
```

#### تخصيص الألوان

يمكن تخصيص ألوان الرسوم البيانية من تبويب المظهر أو مباشرة في `config.js`:

```javascript
CHART_CONFIG: {
    COLORS: {
        PRIMARY: "#4F46E5",      // اللون الأساسي
        SECONDARY: "#10B981",    // اللون الثانوي
        WARNING: "#F59E0B",      // لون التحذير
        DANGER: "#EF4444",       // لون الخطر
        INFO: "#3B82F6"          // لون المعلومات
    }
}
```

### 📊 مراقبة الأداء

عند تفعيل "مراقبة الأداء" في الإعدادات المتقدمة:
- تسجيل أوقات تحميل البيانات
- مراقبة استخدام الذاكرة
- تتبع سرعة الاستجابة

### 🔄 النسخ الاحتياطي التلقائي

- **التفعيل**: من تبويب الإعدادات المتقدمة
- **التكرار**: قابل للتخصيص (من ساعة إلى أسبوع)
- **العدد الأقصى**: حد أقصى للنسخ المحفوظة

### 🚨 استكشاف الأخطاء

#### مشاكل شائعة وحلولها

**لا يمكن تحميل البيانات:**
- تأكد من اتصالك بالإنترنت
- تحقق من صحة رابط Google Sheets
- تأكد من أن الجدول مشارك للعامة
- **أعد تحميل الصفحة** للمحاولة مرة أخرى

**لا يمكن الوصول للوحة التحكم:**
- تأكد من صحة كلمة المرور
- امسح ذاكرة التخزين المحلي وأعد تحميل الصفحة

**الإعدادات لا تُحفظ:**
- تأكد من تفعيل JavaScript في المتصفح
- تحقق من أذونات التخزين المحلي

**رسالة "تعذر تحميل البيانات":**
1. اضغط "إعدادات المدير"
2. تحقق من رابط Google Sheets في تبويب "البيانات"
3. اضغط "اختبار الاتصال"
4. أصلح أي مشاكل واحفظ الإعدادات
5. **أعد تحميل الصفحة**

#### رسائل النظام

عند فشل تحميل البيانات، سيعرض النظام:
- رسالة خطأ واضحة تشرح المشكلة
- زر "إعادة تحميل الصفحة" للمحاولة مرة أخرى
- زر "إعدادات المدير" لتعديل إعدادات Google Sheets
- إرشادات مفصلة لحل المشكلة

> ⚠️ **مهم**: في حالة فشل تحميل البيانات، لا توجد بيانات احتياطية. يجب حل مشكلة الاتصال بـ Google Sheets أو إعادة تحميل الصفحة.

### 📞 الدعم والمساعدة

للحصول على المساعدة أو الإبلاغ عن مشاكل:
- راجع ملف `config.js` للإعدادات التفصيلية
- تحقق من وحدة تحكم المطور في المتصفح
- فعّل وضع التطوير للمزيد من المعلومات

### 🎯 التطويرات المستقبلية

- **تعدد المستخدمين**: إضافة مستويات صلاحيات مختلفة
- **التقارير المتقدمة**: تقارير تفصيلية قابلة للتخصيص
- **التكامل السحابي**: ربط مع خدمات التخزين السحابي
- **الإشعارات الذكية**: تنبيهات ذكية بناءً على البيانات

---

**تم التطوير بـ ❤️ لخدمة المجتمع**

*نظام لوحة تحكم الروضة - الإصدار المطور مع إدارة شاملة للإعدادات*
